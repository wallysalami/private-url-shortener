<div class='row'>
  <div class='col-md'>
    <div class='sticky-top card card-block' id='shortened-url-info'>
      <dl>
        <dt class='shortened-url-title'>
          <h1><%= @shortened_url.title %></h1>
        </dt>
        <dd class='shortened-url-description'>
          <%= @shortened_url.description %>
        </dd>
      </dl>

      <div class="shortened-url-links">
        <div>
           <%= @base_url + '/' + @shortened_url.short_uri %>
        </div>
        <div>
          <i class="fa fa-share fa-flip-vertical"></i> 
          <%= link_to @shortened_url.destination_url %>
        </div>
      </div>

      <% if @shortened_url.is_locked %>
        <span class='text-danger'>
          <i class="fa fa-lock"></i> URL Locked
        </span>
      <% else %>
        <span class='text-success'>
          <i class="fa fa-unlock"></i> URL Unlocked
        </span>
      <% end %>

      <% if @shortened_url.show_preview_page %>
        <span class='text-success'>
          <i class="fa fa-file-text-o"></i> Shows Preview Page
        </span>
      <% else %>
        <span class='text-danger'>
          <i class="fa fa-times"></i> Does Not Show Preview Page
        </span>
      <% end %>

      <nav style='margin-top: 15px'>
        <%= link_to 'Edit', edit_shortened_url_path(@shortened_url) %> |
        <%= link_to 'Back', shortened_urls_path %>
      </nav>
    </div>

    <div id='qr-code-div'></div>
  </div>

  
  <div class='col-md'>
    <% @grouped_accesses.each do |access_on_current_date| %>
      <div class="card access-log-list">
        <div class="card-header sticky-top">
          Accesses on <%= I18n.l access_on_current_date[:date], format: :long %>
        </div>
        <ol class="list-group list-group-flush">
          <% access_on_current_date[:accesses].each do |access| %>
            <li class="list-group-item">
              <div class="access-time-column"> 
                <%= time_tag access.created_at, access.created_at.strftime("%H:%M"), class: "badge badge-pill badge-default access-time"%>
              </div>

              <div class="col access-other-info-column">
                <div class='row'>
                  <div class='access-ip'>
                    <%= access.ip %>
                  </div>
                  <small class='col-sm access-location'>
                    <%= access.full_location %>
                  </small>
                </div>

                <small>
                  <%= link_to access.referer, '', class: 'access-referer-link' %>
                </small>
              </div>
            </li>
          <% end %>
        </ol>
      </div>
    <% end %>
  </div>
</div>

<script>
  new QRCode(
    document.getElementById("qr-code-div"),
    {
      text: "<%= @shortened_url.destination_url %>",
      <%# useSVG: true, %>
      width: 256,
      height: 256
    }
  );
</script>